<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('./partials/head'); %>
    </head>
    <body>
        <header>
            <div class="user__info">
                <img src="/img/<%= photo %> " alt="<%= username %> " width="50" height="50" />
                <% if(name)  { %>
                    <h1><%= name %> </h1>
                <% } else { %> 
                    <h1>@<%= username %></h1>
                <% } %>
            </div>
            <!-- <h1 class="app__title"><span>Hey!</span> Messenger</h1> -->
            <div class="search__bar">
                <input type="search" id="search-box" name="search">
                <button>
                    <img src="/img/icon-search.svg" alt="search" height="25" width="25" />
                </button>

                <div class="search__list">
                    <ul>
                        <li>item one</li>
                        <li>item two</li>
                        <li>item three</li>
                        <li>item four</li>
                    </ul>
                </div>
            </div>
            
        </header>

        <% 
            const d = new Date();
            var contacts = [
                {
                    id: "jsdkjskj",
                    name: "John Doe",
                    username: "johndoe",
                    lastSeen: (d.getHours() + ":" + d.getMinutes()),
                    lastSent: "What is the time for the meeting?",
                    unRead: 2,
                    photo: "avatar.png",
                    isOnline: true,
                },
                {
                    id: "jsdkhjskj",
                    name: "John Doe",
                    username: "johndoe",
                    lastSeen: (d.getHours() + ":" + d.getMinutes()),
                    lastSent: "yes",
                    unRead: 1,
                    photo: "avatar.png",
                    isOnline: true,
                },
                {
                    id: "jsdkhj9skj",
                    name: "John Doe",
                    username: "johndoe",
                    lastSeen: (d.getHours() + ":" + d.getMinutes()),
                    lastSent: "we'll go together",
                    unRead: 8,
                    photo: "avatar.png",
                    isOnline: true,
                },
                {
                    id: "0jsdkhjskj",
                    name: "John Doe",
                    username: "johndoe",
                    lastSeen: (d.getHours() + ":" + d.getMinutes()),
                    lastSent: "even if I was there, what was I suppose to do?",
                    unRead: 22,
                    photo: "avatar.png",
                    isOnline: false,
                },
            ];
            const last = contacts.length - 1;
        %> 

        <main>
            <aside>
                <ul class="contact__list">
                    <% for (const contact of contacts) { %> 
                        <li class="contact">
                            <div class="img__container">
                                <% if(contact.isOnline) { %> 
                                    <span class="online"></span>
                                <% } %> 
                                <img src="/img/<%= contact.photo %>" alt="<%= contact.username %>" width="50" height="50" />
                            </div>
                            <div class="name__msg">
                                <% if (contact.name) { %>
                                    <h4><%= contact.name %></h4>
                                <% } else { %>
                                    <h4><%= contact.username %></h4>
                                <% } %>
                                <p><% if(contact.lastSent) { %> <%= contact.lastSent %> <% } %>  </p>
                            </div>
                            <div class="time__badge">
                                <span class="badge">
                                    <% if(contact.unRead < 10) { %> 
                                        <%= contact.unRead %> 
                                    <% } else { %> 
                                        <%= "9+" %> 
                                    <% } %> 
                                </span>
                                <span class="time"><%= contact.lastSeen %></span>
                            </div>
                        </li>
                        <% if(contact.id !== contacts[last].id) {%> 
                            <div class="contact__divider">
                                <div id="a0001"></div>
                                <div id="a0002"></div>
                            </div>
                        <% } %> 
                    <% } %> 
                </ul>
            </aside>
        </main>
    </body>
</html>